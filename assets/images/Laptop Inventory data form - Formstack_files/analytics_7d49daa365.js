Formstack.Analytics=function(e,i,s){var n=e+"/forms/analytics.php?f="+i;this.bottleneck=null,this.readCookie=function(e){for(var t=e+"=",i=document.cookie.split(";"),s=0;s<i.length;s++){for(var n=i[s];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null},this.trackView=function(){var e,t=document.createElement("script");t.type="text/javascript",t.defer=!0,this.isFirstView()?t.src=n+"&a=fv":t.src=n+"&a=v",e=window.location.href.match("formstack.com")?"hosted":document.querySelector(".fsEmbed")?"embedded":"htmlembed",t.src+="&m="+e,document.getElementsByTagName("head")[0].appendChild(t)},this.isFirstView=function(){var e="FormSpringFormView"+i,t="formstack.analytics.viewed-form."+i;try{window.sessionStorage}catch(e){return!0}return this.readCookie(e)?(window.localStorage.setItem(t,!0),!1):!window.localStorage.getItem(t)&&(window.localStorage.setItem(t,!0),!0)},this.trackView(),this.trackTouch=function(){function e(){var e,t;this.touched||(this.touched=!0,e=0<(e=s.getIncompleteFields(!0)).length?e[0].id:0,(t=document.createElement("script")).type="text/javascript",t.src=n+"&a=t&b="+e,document.getElementsByTagName("head")[0].appendChild(t))}jQuery("input.fsField","#fsForm"+i).bind("focus",jQuery.proxy(e,this)),jQuery("textarea.fsField","#fsForm"+i).bind("focus",jQuery.proxy(e,this)),jQuery("select.fsField","#fsForm"+i).bind("focus",jQuery.proxy(e,this))},this.trackBottleneck=function(){jQuery(".fsField").bind("change",jQuery.proxy(function(e){var t;(null===this.bottleneck||s.checkRequired(this.bottleneck.field,!1,!0))&&(sessionId=window["formstack_analytics_session_"+i])&&(0<(fields=s.getIncompleteFields(!0)).length?(this.bottleneck=fields[0],(t=document.createElement("script")).type="text/javascript",t.src=n+"&a=b&b="+this.bottleneck.id+"&s="+sessionId,document.getElementsByTagName("head")[0].appendChild(t)):(null!==this.bottleneck&&((t=document.createElement("script")).type="text/javascript",t.src=n+"&a=b&b=0&s="+sessionId,document.getElementsByTagName("head")[0].appendChild(t)),this.bottleneck=null))},this))}};